{% import "bootstrap/utils.html" as utils %}
{% extends "base.html" %}

{% block content %}

<h1 class="title is-4">
    Web Controlled- Manually 
    Robot AAYA1.0
</h1>

<form id="modeForm" name="modeForm" >
    <div class="control" >
        <label class="radio">
          <input type="radio" name="mode" id="manualMode" onchange="SetData(this);" value="ManualState" >
            Manual State     
        </label> &nbsp; &nbsp; &nbsp;    
        <label class="radio">
           <input type="radio" name="mode" id="automaticMode" onchange="SetData(this);" value="AutomaticState" >
             Automatic State
        </label>
    </div>
</form>


<form id="manualForm" name="manualMode"  method="post"  hidden action="{{ url_for('home.profile_task') }}"  >
    <div class="table-container">
        <table class="table">
         <td>
            <div class="field" style="float:left">
             
                <input class="button is-primary is-outlined" type="submit" value="Stop/Start" name="stopL" />
                <input class="button is-primary is-outlined" type="submit" value="Capture" name="capture"/>
                <input class="button is-primary is-outlined" type="submit" value="Grey" name="grey" />
                <input class="button is-primary is-outlined" type="submit" value="Face Only" name="face" />
                <input class="button is-primary is-outlined" type="submit" value="Start/Stop Recording" name="record" />
               
                <!--img src="http://192.168.1.42:8081" /-->
                <img src="{{ url_for('home.video_feed') }}" height="80%">
       
            </div>
         </td>
         <td>
            <div style="height:400px; width:300px;">
              
                
                <a href="#" id="up" style="font-size:30px;text-decoration:none;"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#x1F881;&#x1F881;<br>Forward</a><br><br>
                <a href="#" id="left" style="font-size:30px;text-decoration:none;"> &#x1F880;&#x1F880;Left</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <a href="#" id="right" style="font-size:30px; text-decoration:none;"> Right &#x1F882;&#x1F882;</a><br><br>
                <a href="#" id="down" style="font-size:30px;text-decoration:none;"> Backward<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#x1F883;&#x1F883;</a>
            
              </div>
         </td>
        </table>
    </div>
</form>
<form id="automaticForm" name="automaticMode" method="post"  hidden  action="{{ url_for('home.automatic_state') }}" >
        <div class="table-container">
            <table class="table">
             <td>
                <div class="field" style="float:left">
                    <input class="button is-primary is-outlined" type="submit" name="aruco" value="Aruco Live" id="arucoV"/>
                    <input class="button is-primary is-outlined" type="submit" name="stopAruco" value="Stop Aruco" id="stopAruco"/>   
                    <script src="../static/js/profile.js"></script>
                    <img src="{{ url_for('home.video_feed') }}" height="50%">
                </div>
             </td>
             <td>
                <div class="field" style="float:right">
                   
                        <div class="content-section" id="modeSel">
                            <br/>
                            {{ utils.flashed_messages() }}
                            <br/>
                        </div>
            </td>
            <td>
                        {% if modes %}  
                        <label> Please select a mode :</label> 
                            <div class="select is-primary">                        
                                 <select id="modeSelect"  class="form-control"  id="all_modes">  
                                  {% for mode in modes %}
                                   <option value="{{mode.id}}" selected>
                                    {{ mode.name_mode }}                       
                                   </option>
                                 {% endfor %}
                                 </select>
                           </div> 
        
                        {% endif %}  
                        <br>
            </td>
            <td>
                      {% if numbersOfStation %} 
                    <label> Please select a number of stations :</label> 
                        <div class="select is-primary">                        
                             <select id="numberSelect"  class="form-control"  id="numberOfStations">  
                              {% for number in numbersOfStation %}
                               <option value="{{number}}" id="selectNumber" selected>
                                {{ number }}                       
                               </option>
                             {% endfor %}
                             </select>
                       </div> 
                       {% endif %} 
     
                    <br>
            </td>
            <td>     
                        <div class="content-section" id="statSel" >
                          <br/>
                          {{ utils.flashed_messages() }}
                          <br/>
                        </div>
            </td>
                    {% if stations %}
            <td>  
                    {% for num in numbersOfStation %}
                        <label> Please select a station :</label> 
                         <div class="select is-primary" id="select_station" hidden>   
                             <select id="stationSelect" class="form-control"  id="all_stations">
                               {% for station in stations %}
                                <option value="{{station.id}}" selected>
                                {{ station.name_station }}                       
                                </option>
                                {% endfor %}
                             </select>
                         </div>
                         {% endfor %}
                       {% endif %}
            </td>  
                 </div>
                <button class="button is-primary is-outlined" id="select_route" type="submit"  >Ok</button>
                    <div id="processed_results">
                            Here we display some output based on the selection
                    </div>
                    
             </td>
            </table>
        </div>
</form>


<script type="text/javascript">
function SetData (elem) { 
    localStorage.setItem(elem.getAttribute('name'), elem.getAttribute('id'));
  
    if (elem.getAttribute('id') == 'manualMode'){
        document.getElementById("manualForm").hidden=false;
        document.getElementById("automaticForm").hidden=true;
       }
    if (elem.getAttribute('id') =="automaticMode"){
        document.getElementById("manualForm").hidden=true;
        document.getElementById("automaticForm").hidden=false;
    }

} 
function GetData (item) { 
    return localStorage.getItem(item); 
}

window.onload = function() {
   
    var Item = GetData ('type');
  
    alert(Item);
 
    if(Item != undefined) {
        document.getElementById(Item).checked = true;
      }
    if (Item == 'manualMode'){
        document.getElementById("manualForm").hidden=false;
        document.getElementById("automaticForm").hidden=true;
      }
   if (Item=="automaticMode"){
        document.getElementById("manualForm").hidden=true;
        document.getElementById("automaticForm").hidden=false;
      }
}
       
    $( document).ready(function(){
    $("#down").on("mousedown", function() {
     $.get('/down_side');
     }).on('mouseup', function() {
     $.get('/stop');
    });
    $("#up").on("mousedown", function() {
     $.get('/up_side');
     }).on('mouseup', function() {
     $.get('/stop');
    });
    $("#left").on("mousedown", function() {
     $.get('/left_side');
     }).on('mouseup', function() {
     $.get('/stop');
    });
    $("#right").on("mousedown", function() {
     $.get('/right_side');
     }).on('mouseup', function() {
     $.get('/stop');
    });
/*
    $("#grey").on("mousedown", function() {
    $.get('/grey');
    });

    $("#stopL").on("mousedown", function() {
    $.get('/stopL');
    });
    $("#face").on("mousedown", function() {
     $.get('/face');
   });

   $("#record").on("mousedown", function() {
    $.get('/record');
   });
   $("#capture").on("mousedown", function() {
    $.get('/capture');
   });*/

   $("#arucoV").click(function() {
    $.get('/arucoV');
   });
   $("#stopAruco").click(function() {
    $.get('/stopAruco');
   });
   

});


</script>

{% endblock %}